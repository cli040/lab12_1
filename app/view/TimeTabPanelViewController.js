/*
 * File: app/view/TimeTabPanelViewController.js
 *
 * This file was generated by Sencha Architect version 4.2.5.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.7.x Modern library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.7.x Modern. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Lab12_1.view.TimeTabPanelViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.timetabpanel',

    OnItemSelected: function(dataview, selected, eOpts) {
        //var index = dataview.indexOf(selected);
        //var record = dataview.getStore().getAt(1);
        //console.log(index);

        var s;
        Ext.each(selected, function (item)
        {
            s = item.data;
        });

        console.log(s);

        //console.log(record.get("Comment"));
        //Ext.create('Lab12_1.view.UpdateTimeFormPanel', {fullscreen: true, record: selected});
    },

    dayContainerActivate: function(newActiveItem, container, oldActiveItem, eOpts) {
        /*
        store.each(function(record,id){
        console.log(record);
        });

        var sumValue=store.sum('Time');
        console.log(sumValue);
        */

        var store= Ext.getStore("TimeStore");
        var sumValue = store.sum('Time');

        Ext.getCmp('SumDayId').setHtml("Sum: " + sumValue);
    },

    dayContainerInit: function(component, eOpts) {
        var currDate = new Date();

        var dd = currDate.getDate();
        var mm = currDate.getMonth() + 1; //January is 0!

        var yyyy = currDate.getFullYear();

        if (dd < 10)
        {
            dd = '0' + dd;
        }

        if (mm < 10)
        {
            mm = '0' + mm;
        }

        var HH = currDate.getHours();
        var MM = currDate.getMinutes();

        if(HH < 10)
        {
            HH = "0" + HH;
        }
        if(MM < 10)
        {
            MM = "0" + MM;
        }

        currDate = dd + '/' + mm + '/' + yyyy;
        Ext.getCmp('DayId').setTitle(currDate);

    },

    weekContainerInit: function(component, eOpts) {
        var firstDayOfWeek = new Date();
        var lastDayOfWeek = new Date();

        if(lastDayOfWeek.getUTCDay() > 0)
        {
            do
            {
                lastDayOfWeek.setDate(lastDayOfWeek.getDate() + 1);
                console.log(lastDayOfWeek.getDate());
            }while(lastDayOfWeek.getUTCDay() !== 0);

        }

        firstDayOfWeek.setDate(lastDayOfWeek.getDate());
        firstDayOfWeek.setDate(firstDayOfWeek.getDate() - 6);

        var dd = firstDayOfWeek.getDate();
        var mm = firstDayOfWeek.getMonth() + 1; //January is 0!

        var yyyy = firstDayOfWeek.getFullYear();

        if (dd < 10)
        {
            dd = '0' + dd;
        }

        if (mm < 10)
        {
            mm = '0' + mm;
        }

        var HH = firstDayOfWeek.getHours();
        var MM = firstDayOfWeek.getMinutes();

        if(HH < 10)
        {
            HH = "0" + HH;
        }
        if(MM < 10)
        {
            MM = "0" + MM;
        }

        firstDayOfWeek = dd + '/' + mm + '/' + yyyy;

        var dd = lastDayOfWeek.getDate();
        var mm = lastDayOfWeek.getMonth() + 1; //January is 0!

        var yyyy = lastDayOfWeek.getFullYear();

        if (dd < 10)
        {
            dd = '0' + dd;
        }

        if (mm < 10)
        {
            mm = '0' + mm;
        }

        var HH = lastDayOfWeek.getHours();
        var MM = lastDayOfWeek.getMinutes();

        if(HH < 10)
        {
            HH = "0" + HH;
        }
        if(MM < 10)
        {
            MM = "0" + MM;
        }

        lastDayOfWeek = dd + '/' + mm + '/' + yyyy;

        var finalWeekDate = firstDayOfWeek + " - " + lastDayOfWeek;

        Ext.getCmp('WeekId').setTitle(finalWeekDate);
    },

    weekContainerActivate: function(newActiveItem, container, oldActiveItem, eOpts) {
        var store= Ext.getStore("TimeStore");
        var sumValue = store.sum('Time');

        Ext.getCmp('SumWeekId').setHtml("Sum: " + sumValue);
    },

    monthContainerInit: function(component, eOpts) {
        var currDate = new Date();
        var currMonth = ["January", "Februry", "March", "April", "May", "June", "July",
            "August", "September", "October", "November", "December"];

        /*switch(currDate.getMonth())
        {
        case 0:
        currMonth = "January";
        break;
        case 1:
        currMonth = "Februry";
        break;
        case 2:
        currMonth = "March";
        break;
        case 3:
        currMonth = "April";
        break;
        case 4:
        currMonth = "May";
        break;
        case 5:
        currMonth = "June";
        break;
        case 6:
        currMonth = "July";
        break;
        case 7:
        currMonth = "August";
        break;
        case 8:
        currMonth = "September";
        break;
        case 9:
        currMonth = "October";
        break;
        case 10:
        currMonth = "November";
        break;
        case 11:
        currMonth = "December";
        break;
        default:
        break;
        }*/

        Ext.getCmp('MonthId').setTitle(currMonth[currDate.getMonth()]);

    },

    monthContainerActivate: function(newActiveItem, container, oldActiveItem, eOpts) {
        var store= Ext.getStore("TimeStore");
        var sumValue = store.sum('Time');

        Ext.getCmp('SumMonthId').setHtml("Sum: " + sumValue);

    }

});